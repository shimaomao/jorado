# solr规范

- 目录
  - [字段规范](#字段规范)
  - [函数编写](#函数编写)
  - [未来规划](#未来规划)

## 字段规范：
1. 不要为字段添加默认值，保持数据与业务独立
2. 对不需要展示的字段设置`stored="false"`,但要有预见性
3. 日期字段不要使用字符串，使用long类型的时间戳
4. 类似数据字典的值使用`int`类型，如有多个值设置`multiValued="true"`
5. 浮点类型优先使用`float`，除非高精度要求再使用`double`
6. 对于要在多个字段中查询相同值的场景可以利用`copyfield`字段合并查询


## 函数编写

由于solr函数对性能影响敏感，函数编写需注意：

1. 需要复杂计算的东西尽可能的在*外部初始化*完成
2. `String`的`split`操作非常慢，使用`StringTokenizer`替代，util目录下的`StringUtils`类提供了绝大多数日常使用的字符串操作方法,同时尽可能少的减少字符串操作
3. 不是绝对必要不在插件中访问外部资源，譬如*访问远程配置*或*读取外部文件*等
4. 针对日期操作采用时间戳的方案
5. 根据使用场景把需要参与计算的数据提前写入索引字段

## 未来规划





